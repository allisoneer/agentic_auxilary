[workspace]
changelog_update = true
git_release_enable = false
git_tag_enable = true
publish = true
pr_labels = ["release"]

[changelog]
header = """# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [Unreleased]
"""

body = """
## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% for group, commits in commits | group_by(attribute="group") %}
### {{ group | upper_first }}
{% for commit in commits %}
  {%- if commit.scope -%}
  - *({{ commit.scope }})* {% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }}
  {% else -%}
  - {% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }}
  {% endif -%}
{% endfor -%}
{% endfor -%}
"""

# Sort commits from oldest to newest
sort_commits = "oldest"

# Only process tags matching monorepo package pattern
tag_pattern = ".*-v[0-9].*"

# Group commits by conventional commit type
commit_parsers = [
  { message = "^feat", group = "â›°ï¸  Features" },
  { message = "^fix", group = "ğŸ› Bug Fixes" },
  { message = "^docs?", group = "ğŸ“š Documentation" },
  { message = "^perf", group = "âš¡ Performance" },
  { message = "^refactor", group = "ğŸšœ Refactor" },
  { message = "^style", group = "ğŸ¨ Styling" },
  { message = "^test", group = "ğŸ§ª Testing" },
  { message = "^chore\\(release\\):", skip = true },
  { message = "^chore|^ci", group = "âš™ï¸  Miscellaneous" },
  { message = "^build", group = "ğŸ“¦ Build System" },
]

[[package]]
name = "thoughts-tool"
changelog_path = "thoughts_tool/CHANGELOG.md"
git_tag_name = "thoughts-tool-v{{ version }}"
release = true

[[package]]
name = "universal-tool-core"
changelog_path = "universal_tool/CHANGELOG.md"
git_tag_name = "universal-tool-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "universal-tool-macros"
changelog_path = "universal_tool/CHANGELOG.md"
git_tag_name = "universal-tool-macros-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "claudecode"
changelog_path = "claudecode_rs/CHANGELOG.md"
git_tag_name = "claudecode-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "pr_comments"
changelog_path = "pr_comments/CHANGELOG.md"
git_tag_name = "pr_comments-v{{ version }}"
release = true

[[package]]
name = "universal-tool-integration-tests"
publish = false

[[package]]
name = "gpt5_reasoner"
changelog_path = "gpt5_reasoner/CHANGELOG.md"
git_tag_name = "gpt5_reasoner-v{{ version }}"
release = true

[[package]]
name = "anthropic-async"
changelog_path = "anthropic_async/CHANGELOG.md"
git_tag_name = "anthropic-async-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "coding_agent_tools"
changelog_path = "coding_agent_tools/CHANGELOG.md"
git_tag_name = "coding_agent_tools-v{{ version }}"
release = true

[[package]]
name = "linear-schema"
changelog_path = "linear_tools/CHANGELOG.md"
git_tag_name = "linear-schema-v{{ version }}"
release = true

[[package]]
name = "linear-queries"
changelog_path = "linear_tools/CHANGELOG.md"
git_tag_name = "linear-queries-v{{ version }}"
release = true

[[package]]
name = "linear-tools"
changelog_path = "linear_tools/CHANGELOG.md"
git_tag_name = "linear-tools-v{{ version }}"
release = true
