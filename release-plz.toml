[workspace]
changelog_update = true
git_release_enable = false
git_tag_enable = true
publish = true
pr_labels = ["release"]

[changelog]
header = """# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [Unreleased]
"""

body = """
## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% for group, commits in commits | group_by(attribute="group") %}
### {{ group | upper_first }}
{% for commit in commits %}
  {%- if commit.scope -%}
  - *({{ commit.scope }})* {% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }}
  {% else -%}
  - {% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }}
  {% endif -%}
{% endfor -%}
{% endfor -%}
"""

# Sort commits from oldest to newest
sort_commits = "oldest"

# Only process tags matching monorepo package pattern
tag_pattern = ".*-v[0-9].*"

# Group commits by conventional commit type
commit_parsers = [
  { message = "^feat", group = "‚õ∞Ô∏è  Features" },
  { message = "^fix", group = "üêõ Bug Fixes" },
  { message = "^docs?", group = "üìö Documentation" },
  { message = "^perf", group = "‚ö° Performance" },
  { message = "^refactor", group = "üöú Refactor" },
  { message = "^style", group = "üé® Styling" },
  { message = "^test", group = "üß™ Testing" },
  { message = "^chore\\(release\\):", skip = true },
  { message = "^chore|^ci", group = "‚öôÔ∏è  Miscellaneous" },
  { message = "^build", group = "üì¶ Build System" },
]

# Autogenerated packages (xtask sync)
# DO NOT EDIT: run `cargo run -p xtask -- sync` to update
# BEGIN:xtask:autogen release-plz:packages
[[package]]
name = "thoughts-bin"
changelog_path = "apps/thoughts/CHANGELOG.md"
git_tag_name = "thoughts-bin-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "thoughts-tool"
changelog_path = "crates/infra/thoughts-core/CHANGELOG.md"
git_tag_name = "thoughts-tool-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "agentic-tools-core"
changelog_path = "crates/agentic-tools/core/CHANGELOG.md"
git_tag_name = "agentic-tools-core-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "agentic_logging"
changelog_path = "crates/infra/agentic-logging/CHANGELOG.md"
git_tag_name = "agentic_logging-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "agentic-mcp"
changelog_path = "apps/agentic-mcp/CHANGELOG.md"
git_tag_name = "agentic-mcp-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "agentic-tools-mcp"
changelog_path = "crates/agentic-tools/mcp/CHANGELOG.md"
git_tag_name = "agentic-tools-mcp-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "agentic-tools-registry"
changelog_path = "crates/agentic-tools/registry/CHANGELOG.md"
git_tag_name = "agentic-tools-registry-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "coding_agent_tools"
changelog_path = "crates/tools/coding-agent-tools/CHANGELOG.md"
git_tag_name = "coding_agent_tools-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "agentic-tools-utils"
changelog_path = "crates/agentic-tools/utils/CHANGELOG.md"
git_tag_name = "agentic-tools-utils-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "claudecode"
changelog_path = "crates/services/claudecode-rs/CHANGELOG.md"
git_tag_name = "claudecode-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "gpt5_reasoner"
changelog_path = "crates/tools/gpt5-reasoner/CHANGELOG.md"
git_tag_name = "gpt5_reasoner-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "linear-tools"
changelog_path = "crates/linear/tools/CHANGELOG.md"
git_tag_name = "linear-tools-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "linear-queries"
changelog_path = "crates/linear/queries/CHANGELOG.md"
git_tag_name = "linear-queries-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "linear-schema"
changelog_path = "crates/linear/schema/CHANGELOG.md"
git_tag_name = "linear-schema-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "pr_comments"
changelog_path = "crates/tools/pr-comments/CHANGELOG.md"
git_tag_name = "pr_comments-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "thoughts-mcp-tools"
changelog_path = "crates/tools/thoughts-mcp-tools/CHANGELOG.md"
git_tag_name = "thoughts-mcp-tools-v{{ version }}"
git_tag_enable = true
release = true

[[package]]
name = "agentic-tools-napi"
changelog_path = "bindings/node/agentic-tools-napi/CHANGELOG.md"
git_tag_name = "agentic-tools-napi-v{{ version }}"
git_tag_enable = true
release = false
publish = false

[[package]]
name = "agentic-tools-macros"
changelog_path = "crates/agentic-tools/macros/CHANGELOG.md"
git_tag_name = "agentic-tools-macros-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "anthropic-async"
changelog_path = "crates/services/anthropic-async/CHANGELOG.md"
git_tag_name = "anthropic-async-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "opencode_rs"
changelog_path = "crates/services/opencode-rs/CHANGELOG.md"
git_tag_name = "opencode_rs-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "universal-tool-core"
changelog_path = "crates/legacy/universal-tool-core/CHANGELOG.md"
git_tag_name = "universal-tool-core-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "universal-tool-macros"
changelog_path = "crates/legacy/universal-tool-macros/CHANGELOG.md"
git_tag_name = "universal-tool-macros-v{{ version }}"
git_tag_enable = false
release = true

[[package]]
name = "universal-tool-integration-tests"
changelog_path = "crates/legacy/universal-tool-integration-tests/CHANGELOG.md"
git_tag_name = "universal-tool-integration-tests-v{{ version }}"
git_tag_enable = true
release = false
publish = false

[[package]]
name = "xtask"
changelog_path = "crates/meta/xtask/CHANGELOG.md"
git_tag_name = "xtask-v{{ version }}"
git_tag_enable = true
release = false
publish = false
# END:xtask:autogen
