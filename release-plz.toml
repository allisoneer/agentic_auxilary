[workspace]
changelog_update = true
git_release_enable = false
git_tag_enable = true
publish = true
pr_labels = ["release"]

[changelog]
header = """# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [Unreleased]
"""

body = """
## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% for group, commits in commits | group_by(attribute="group") %}
### {{ group | upper_first }}
{% for commit in commits %}
  {%- if commit.scope -%}
  - *({{ commit.scope }})* {% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }}
  {% else -%}
  - {% if commit.breaking %}[**breaking**] {% endif %}{{ commit.message | upper_first }}
  {% endif -%}
{% endfor -%}
{% endfor -%}
"""

# Sort commits from oldest to newest
sort_commits = "oldest"

# Only process tags matching monorepo package pattern
tag_pattern = ".*-v[0-9].*"

# Group commits by conventional commit type
commit_parsers = [
  { message = "^feat", group = "⛰️  Features" },
  { message = "^fix", group = "🐛 Bug Fixes" },
  { message = "^docs?", group = "📚 Documentation" },
  { message = "^perf", group = "⚡ Performance" },
  { message = "^refactor", group = "🚜 Refactor" },
  { message = "^style", group = "🎨 Styling" },
  { message = "^test", group = "🧪 Testing" },
  { message = "^chore\\(release\\):", skip = true },
  { message = "^chore|^ci", group = "⚙️  Miscellaneous" },
  { message = "^build", group = "📦 Build System" },
]

[[package]]
name = "thoughts-tool"
changelog_path = "thoughts_tool/CHANGELOG.md"
git_tag_name = "thoughts-tool-v{{ version }}"
release = true

[[package]]
name = "universal-tool-core"
changelog_path = "universal_tool/CHANGELOG.md"
git_tag_name = "universal-tool-v{{ version }}"
release = true

[[package]]
name = "universal-tool-macros"
changelog_path = "universal_tool/CHANGELOG.md"
git_tag_name = "universal-tool-macros-v{{ version }}"
release = true

[[package]]
name = "claudecode"
changelog_path = "claudecode_rs/CHANGELOG.md"
git_tag_name = "claudecode-v{{ version }}"
release = true

[[package]]
name = "universal-tool-integration-tests"
publish = false

[[package]]
name = "gpt5_reasoner"
changelog_path = "gpt5_reasoner/CHANGELOG.md"
git_tag_name = "gpt5_reasoner-v{{ version }}"
release = true

